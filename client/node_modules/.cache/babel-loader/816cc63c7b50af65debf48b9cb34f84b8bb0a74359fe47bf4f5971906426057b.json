{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shagun Khandelwal\\\\zerodha\\\\client\\\\src\\\\components\\\\AISummary\\\\AISummary.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport './AISummary.css';\n\n// Register ChartJS components\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\nconst AISummary = () => {\n  _s();\n  const {\n    symbol\n  } = useParams();\n  const navigate = useNavigate();\n  const [summary, setSummary] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [query, setQuery] = useState('');\n  const [customQueryResult, setCustomQueryResult] = useState(null);\n  const [isCustomQuery, setIsCustomQuery] = useState(false);\n  const [stockSearch, setStockSearch] = useState('');\n  const [chartData, setChartData] = useState(null);\n  const [news, setNews] = useState([]);\n  const [chartSummary, setChartSummary] = useState('');\n  const [newsSummary, setNewsSummary] = useState('');\n  const [activeTab, setActiveTab] = useState('analysis');\n  const [chartLoading, setChartLoading] = useState(false);\n  const [chartError, setChartError] = useState(null);\n\n  // API Keys - Consider moving these to environment variables\n  const FINNHUB_API_KEY = 'd1aopp9r01qjhvtqeebgd1aopp9r01qjhvtqeec0';\n  const OPENROUTER_API_KEY = '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';\n\n  // Fetch stock summary\n  const fetchStockSummary = async (stockSymbol, customQuestion = '') => {\n    try {\n      setLoading(true);\n      setError(null);\n      setIsCustomQuery(!!customQuestion);\n      const messages = [{\n        \"role\": \"system\",\n        \"content\": \"You are a financial analyst providing accurate stock information. Provide detailed responses with key metrics when available.\"\n      }];\n      if (customQuestion) {\n        messages.push({\n          \"role\": \"user\",\n          \"content\": `${customQuestion} about ${stockSymbol} stock. Provide detailed analysis with numbers if available.`\n        });\n      } else {\n        messages.push({\n          \"role\": \"system\",\n          \"content\": \"Provide a comprehensive analysis including company overview, recent performance, key metrics, and outlook. Keep it between 200-300 words.\"\n        }, {\n          \"role\": \"user\",\n          \"content\": `Provide a detailed analysis of ${stockSymbol} stock. Include important metrics like P/E ratio, market cap, dividend yield if available, and recent performance.`\n        });\n      }\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\n        model: \"openai/gpt-3.5-turbo\",\n        messages: messages,\n        max_tokens: 1000\n      }, {\n        headers: {\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const result = response.data.choices[0].message.content;\n      if (customQuestion) {\n        setCustomQueryResult(result);\n      } else {\n        setSummary(result);\n      }\n    } catch (err) {\n      console.error(\"Error generating summary:\", err);\n      setError('Failed to generate response. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch 1-day chart data\n  const fetchChartData = async stockSymbol => {\n    setChartLoading(true);\n    setChartError(null);\n    try {\n      // First try Finnhub\n      try {\n        var _response$data$c;\n        const to = Math.floor(Date.now() / 1000);\n        const from = to - 24 * 60 * 60; // 1 day data\n        const resolution = '5'; // 5-minute intervals\n\n        if (!FINNHUB_API_KEY) {\n          throw new Error('Finnhub API key is missing');\n        }\n        const response = await axios.get(`https://finnhub.io/api/v1/stock/candle?symbol=${stockSymbol}&resolution=${resolution}&from=${from}&to=${to}&token=${FINNHUB_API_KEY}`, {\n          timeout: 5000 // Add timeout to prevent hanging\n        });\n        console.log('Finnhub response:', response.data);\n        if (response.data.s === 'no_data') {\n          throw new Error('No data available for this symbol');\n        }\n        if (response.data.s === 'ok' && ((_response$data$c = response.data.c) === null || _response$data$c === void 0 ? void 0 : _response$data$c.length) > 0) {\n          const chartLabels = response.data.t.map(timestamp => new Date(timestamp * 1000).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          }));\n          const chartData = {\n            labels: chartLabels,\n            datasets: [{\n              label: `${stockSymbol} Price`,\n              data: response.data.c,\n              borderColor: '#3a80e9',\n              backgroundColor: 'rgba(58, 128, 233, 0.3)',\n              borderWidth: 2,\n              tension: 0.1,\n              fill: true,\n              pointRadius: 0 // Remove points for cleaner look\n            }]\n          };\n          setChartData(chartData);\n          generateChartSummary(stockSymbol, response.data.c);\n          return;\n        }\n        throw new Error('Invalid data format from Finnhub');\n      } catch (finnhubError) {\n        console.log('Finnhub failed:', finnhubError.message);\n        // Proceed to Yahoo fallback\n      }\n\n      // Fallback to Yahoo Finance with CORS proxy\n      try {\n        var _response$data$chart, _response$data$chart$;\n        // Use a CORS proxy for Yahoo Finance\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n        const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${stockSymbol}?range=1d&interval=5m`;\n        const response = await axios.get(proxyUrl + yahooUrl, {\n          timeout: 5000,\n          headers: {\n            'X-Requested-With': 'XMLHttpRequest'\n          }\n        });\n        console.log('Yahoo response:', response.data);\n        if (!((_response$data$chart = response.data.chart) !== null && _response$data$chart !== void 0 && (_response$data$chart$ = _response$data$chart.result) !== null && _response$data$chart$ !== void 0 && _response$data$chart$[0])) {\n          throw new Error('No chart data available from Yahoo');\n        }\n        const result = response.data.chart.result[0];\n        const timestamps = result.timestamp;\n        const quotes = result.indicators.quote[0].close;\n        const chartLabels = timestamps.map(timestamp => new Date(timestamp * 1000).toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        }));\n        setChartData({\n          labels: chartLabels,\n          datasets: [{\n            label: `${stockSymbol} Price`,\n            data: quotes,\n            borderColor: '#3a80e9',\n            backgroundColor: 'rgba(58, 128, 233, 0.3)',\n            borderWidth: 2,\n            tension: 0.1,\n            fill: true,\n            pointRadius: 0\n          }]\n        });\n        generateChartSummary(stockSymbol, quotes);\n      } catch (yahooError) {\n        console.error('Yahoo Finance failed:', yahooError.message);\n        setChartError(`Failed to load chart data: ${yahooError.message}`);\n      }\n    } catch (err) {\n      console.error('Error in fetchChartData:', err);\n      setChartError(`Error loading chart: ${err.message}`);\n    } finally {\n      setChartLoading(false);\n    }\n  };\n\n  // Generate AI summary of the chart\n  const generateChartSummary = async (stockSymbol, priceData) => {\n    try {\n      if (!priceData || priceData.length === 0) return;\n      const openPrice = priceData[0];\n      const currentPrice = priceData[priceData.length - 1];\n      const highPrice = Math.max(...priceData);\n      const lowPrice = Math.min(...priceData);\n      const change = currentPrice - openPrice;\n      const percentChange = change / openPrice * 100;\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\n        model: \"openai/gpt-3.5-turbo\",\n        messages: [{\n          \"role\": \"system\",\n          \"content\": \"You are a financial analyst providing concise technical analysis of stock charts.\"\n        }, {\n          \"role\": \"user\",\n          \"content\": `Provide a brief (2-3 sentence) technical summary of ${stockSymbol}'s trading today. \n                        Open: $${openPrice.toFixed(2)}, Current: $${currentPrice.toFixed(2)}, \n                        High: $${highPrice.toFixed(2)}, Low: $${lowPrice.toFixed(2)}, \n                        Change: ${change >= 0 ? '+' : ''}${change.toFixed(2)} (${percentChange >= 0 ? '+' : ''}${percentChange.toFixed(2)}%). \n                        Focus on key price action and trends.`\n        }],\n        max_tokens: 200\n      }, {\n        headers: {\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      setChartSummary(response.data.choices[0].message.content);\n    } catch (err) {\n      console.error(\"Error generating chart summary:\", err);\n    }\n  };\n\n  // Fetch market news\n  const fetchStockNews = async stockSymbol => {\n    try {\n      const response = await axios.get(`https://finnhub.io/api/v1/company-news?symbol=${stockSymbol}&from=${new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}&to=${new Date().toISOString().split('T')[0]}&token=${FINNHUB_API_KEY}`);\n\n      // Filter for relevant news\n      const filteredNews = response.data.filter(item => item.headline && item.headline.toLowerCase().includes(stockSymbol.toLowerCase())).slice(0, 5); // Limit to 5 most recent\n\n      setNews(filteredNews);\n      generateNewsSummary(stockSymbol, filteredNews);\n    } catch (err) {\n      console.error(\"Error fetching news:\", err);\n    }\n  };\n\n  // Generate AI summary of the news\n  const generateNewsSummary = async (stockSymbol, newsItems) => {\n    try {\n      if (!newsItems || newsItems.length === 0) return;\n      const headlines = newsItems.map(item => item.headline).join('\\n- ');\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\n        model: \"openai/gpt-3.5-turbo\",\n        messages: [{\n          \"role\": \"system\",\n          \"content\": \"You are a financial news analyst that summarizes recent market news about stocks.\"\n        }, {\n          \"role\": \"user\",\n          \"content\": `Provide a concise 3-4 sentence summary of the key recent news about ${stockSymbol} based on these headlines:\n                        - ${headlines}\n                        \n                        Focus on the most impactful developments and overall sentiment.`\n        }],\n        max_tokens: 300\n      }, {\n        headers: {\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      setNewsSummary(response.data.choices[0].message.content);\n    } catch (err) {\n      console.error(\"Error generating news summary:\", err);\n    }\n  };\n\n  // Load all data when symbol changes\n  useEffect(() => {\n    if (symbol) {\n      setLoading(true);\n      fetchStockSummary(symbol);\n      fetchChartData(symbol);\n      fetchStockNews(symbol);\n    }\n  }, [symbol]);\n  const handleQuerySubmit = e => {\n    e.preventDefault();\n    if (query.trim() && symbol) {\n      fetchStockSummary(symbol, query);\n      setQuery('');\n    }\n  };\n  const handleStockSearch = e => {\n    e.preventDefault();\n    if (stockSearch.trim()) {\n      navigate(`/ai-summary/${stockSearch.trim().toUpperCase()}`);\n    }\n  };\n\n  // Chart options\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        mode: 'index',\n        intersect: false,\n        callbacks: {\n          label: function (context) {\n            return `${context.dataset.label}: $${context.parsed.y.toFixed(2)}`;\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: false,\n        ticks: {\n          callback: function (value) {\n            return '$' + value.toFixed(2);\n          }\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.1)'\n        }\n      },\n      x: {\n        grid: {\n          display: false\n        }\n      }\n    },\n    interaction: {\n      intersect: false,\n      mode: 'index'\n    }\n  };\n\n  // If no symbol is selected\n  if (!symbol) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-summary-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-summary-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Stock Analysis Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"primary-search-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleStockSearch,\n          className: \"primary-search-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: stockSearch,\n            onChange: e => setStockSearch(e.target.value),\n            placeholder: \"Enter a stock symbol (e.g., AAPL, MSFT)\",\n            className: \"primary-search-input\",\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"primary-search-button\",\n            children: \"Analyze Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"search-examples\",\n          children: \"Try: AAPL, MSFT, TSLA, GOOGL, AMZN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Welcome to Stock Analysis AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Get comprehensive AI-powered analysis of any publicly traded company. Enter a stock symbol above to begin.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"features\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Features:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Detailed company overview and financial metrics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Recent performance analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"1-day price chart with technical summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Latest market news with sentiment analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Ability to ask specific questions about any stock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ai-summary-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-summary-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [symbol.toUpperCase(), \" Stock Analysis\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/ai-summary'),\n        className: \"back-button\",\n        children: \"Analyze Another Stock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-section\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleQuerySubmit,\n        className: \"query-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: query,\n          onChange: e => setQuery(e.target.value),\n          placeholder: `Ask anything about ${symbol.toUpperCase()}...`,\n          className: \"query-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"query-button\",\n          children: \"Ask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'analysis' ? 'active' : ''}`,\n        onClick: () => setActiveTab('analysis'),\n        children: \"AI Analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'chart' ? 'active' : ''}`,\n        onClick: () => setActiveTab('chart'),\n        children: \"Price Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'news' ? 'active' : ''}`,\n        onClick: () => setActiveTab('news'),\n        children: \"Market News\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-summary-content\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Generating AI-powered analysis...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"retry-button\",\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this) : isCustomQuery ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"query-result\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Response to your query:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-text\",\n          children: customQueryResult.split('\\n').map((paragraph, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: paragraph\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsCustomQuery(false),\n          className: \"show-original-button\",\n          children: \"Show Full Analysis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [activeTab === 'analysis' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Comprehensive Analysis of \", symbol.toUpperCase()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-text\",\n            children: summary.split('\\n').map((paragraph, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n              children: paragraph\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 15\n        }, this), activeTab === 'chart' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [symbol.toUpperCase(), \" Today's Price Action\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 17\n          }, this), chartLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading chart data...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 19\n          }, this) : chartError ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Could not load chart: \", chartError]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => fetchChartData(symbol),\n              className: \"retry-button\",\n              children: \"Retry\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 19\n          }, this) : chartData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-container\",\n              children: /*#__PURE__*/_jsxDEV(Line, {\n                data: chartData,\n                options: chartOptions\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 21\n            }, this), chartSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-summary\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Technical Summary:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: chartSummary\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-data-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"No chart data available for \", symbol.toUpperCase()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => fetchChartData(symbol),\n              className: \"retry-button\",\n              children: \"Try Again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 15\n        }, this), activeTab === 'news' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"news-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Latest News About \", symbol.toUpperCase()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 17\n          }, this), newsSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"news-summary\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"News Summary:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: newsSummary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"news-list\",\n            children: news.length > 0 ? news.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"news-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: item.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  children: item.headline\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 587,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"news-source\",\n                children: [item.source, \" - \", new Date(item.datetime * 1000).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"news-summary\",\n                children: item.summary || 'No summary available'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 23\n            }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"No recent news found for \", symbol.toUpperCase()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 596,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 443,\n    columnNumber: 5\n  }, this);\n};\n_s(AISummary, \"k3znR7MiSwmVvQr2/1TzlQ5KZZc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AISummary;\nexport default AISummary;\nvar _c;\n$RefreshReg$(_c, \"AISummary\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","Line","jsxDEV","_jsxDEV","Fragment","_Fragment","register","AISummary","_s","symbol","navigate","summary","setSummary","loading","setLoading","error","setError","query","setQuery","customQueryResult","setCustomQueryResult","isCustomQuery","setIsCustomQuery","stockSearch","setStockSearch","chartData","setChartData","news","setNews","chartSummary","setChartSummary","newsSummary","setNewsSummary","activeTab","setActiveTab","chartLoading","setChartLoading","chartError","setChartError","FINNHUB_API_KEY","OPENROUTER_API_KEY","fetchStockSummary","stockSymbol","customQuestion","messages","push","response","post","model","max_tokens","headers","result","data","choices","message","content","err","console","fetchChartData","_response$data$c","to","Math","floor","Date","now","from","resolution","Error","get","timeout","log","s","c","length","chartLabels","t","map","timestamp","toLocaleTimeString","hour","minute","labels","datasets","label","borderColor","backgroundColor","borderWidth","tension","fill","pointRadius","generateChartSummary","finnhubError","_response$data$chart","_response$data$chart$","proxyUrl","yahooUrl","chart","timestamps","quotes","indicators","quote","close","yahooError","priceData","openPrice","currentPrice","highPrice","max","lowPrice","min","change","percentChange","toFixed","fetchStockNews","toISOString","split","filteredNews","filter","item","headline","toLowerCase","includes","slice","generateNewsSummary","newsItems","headlines","join","handleQuerySubmit","e","preventDefault","trim","handleStockSearch","toUpperCase","chartOptions","responsive","maintainAspectRatio","plugins","legend","display","tooltip","mode","intersect","callbacks","context","dataset","parsed","y","scales","beginAtZero","ticks","callback","value","grid","color","x","interaction","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","target","placeholder","autoFocus","onClick","window","location","reload","paragraph","i","options","index","href","url","rel","source","datetime","toLocaleDateString","_c","$RefreshReg$"],"sources":["C:/Users/Shagun Khandelwal/zerodha/client/src/components/AISummary/AISummary.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler,\r\n} from 'chart.js';\r\nimport { Line } from 'react-chartjs-2';\r\nimport './AISummary.css';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst AISummary = () => {\r\n  const { symbol } = useParams();\r\n  const navigate = useNavigate();\r\n  const [summary, setSummary] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [query, setQuery] = useState('');\r\n  const [customQueryResult, setCustomQueryResult] = useState(null);\r\n  const [isCustomQuery, setIsCustomQuery] = useState(false);\r\n  const [stockSearch, setStockSearch] = useState('');\r\n  const [chartData, setChartData] = useState(null);\r\n  const [news, setNews] = useState([]);\r\n  const [chartSummary, setChartSummary] = useState('');\r\n  const [newsSummary, setNewsSummary] = useState('');\r\n  const [activeTab, setActiveTab] = useState('analysis');\r\n  const [chartLoading, setChartLoading] = useState(false);\r\n  const [chartError, setChartError] = useState(null);\r\n\r\n  // API Keys - Consider moving these to environment variables\r\n  const FINNHUB_API_KEY = 'd1aopp9r01qjhvtqeebgd1aopp9r01qjhvtqeec0';\r\n  const OPENROUTER_API_KEY = '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';\r\n\r\n  // Fetch stock summary\r\n  const fetchStockSummary = async (stockSymbol, customQuestion = '') => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      setIsCustomQuery(!!customQuestion);\r\n\r\n      const messages = [\r\n        { \r\n          \"role\": \"system\", \r\n          \"content\": \"You are a financial analyst providing accurate stock information. Provide detailed responses with key metrics when available.\" \r\n        }\r\n      ];\r\n\r\n      if (customQuestion) {\r\n        messages.push({\r\n          \"role\": \"user\",\r\n          \"content\": `${customQuestion} about ${stockSymbol} stock. Provide detailed analysis with numbers if available.`\r\n        });\r\n      } else {\r\n        messages.push(\r\n          {\r\n            \"role\": \"system\",\r\n            \"content\": \"Provide a comprehensive analysis including company overview, recent performance, key metrics, and outlook. Keep it between 200-300 words.\"\r\n          },\r\n          {\r\n            \"role\": \"user\",\r\n            \"content\": `Provide a detailed analysis of ${stockSymbol} stock. Include important metrics like P/E ratio, market cap, dividend yield if available, and recent performance.`\r\n          }\r\n        );\r\n      }\r\n\r\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\r\n        model: \"openai/gpt-3.5-turbo\",\r\n        messages: messages,\r\n        max_tokens: 1000\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const result = response.data.choices[0].message.content;\r\n      \r\n      if (customQuestion) {\r\n        setCustomQueryResult(result);\r\n      } else {\r\n        setSummary(result);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error generating summary:\", err);\r\n      setError('Failed to generate response. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch 1-day chart data\r\n  const fetchChartData = async (stockSymbol) => {\r\n    setChartLoading(true);\r\n    setChartError(null);\r\n    \r\n    try {\r\n      // First try Finnhub\r\n      try {\r\n        const to = Math.floor(Date.now() / 1000);\r\n        const from = to - (24 * 60 * 60); // 1 day data\r\n        const resolution = '5'; // 5-minute intervals\r\n        \r\n        if (!FINNHUB_API_KEY) {\r\n          throw new Error('Finnhub API key is missing');\r\n        }\r\n        \r\n        const response = await axios.get(\r\n          `https://finnhub.io/api/v1/stock/candle?symbol=${stockSymbol}&resolution=${resolution}&from=${from}&to=${to}&token=${FINNHUB_API_KEY}`,\r\n          {\r\n            timeout: 5000 // Add timeout to prevent hanging\r\n          }\r\n        );\r\n        \r\n        console.log('Finnhub response:', response.data);\r\n        \r\n        if (response.data.s === 'no_data') {\r\n          throw new Error('No data available for this symbol');\r\n        }\r\n        \r\n        if (response.data.s === 'ok' && response.data.c?.length > 0) {\r\n          const chartLabels = response.data.t.map(timestamp => \r\n            new Date(timestamp * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n          );\r\n          \r\n          const chartData = {\r\n            labels: chartLabels,\r\n            datasets: [\r\n              {\r\n                label: `${stockSymbol} Price`,\r\n                data: response.data.c,\r\n                borderColor: '#3a80e9',\r\n                backgroundColor: 'rgba(58, 128, 233, 0.3)',\r\n                borderWidth: 2,\r\n                tension: 0.1,\r\n                fill: true,\r\n                pointRadius: 0 // Remove points for cleaner look\r\n              }\r\n            ]\r\n          };\r\n          \r\n          setChartData(chartData);\r\n          generateChartSummary(stockSymbol, response.data.c);\r\n          return;\r\n        }\r\n        \r\n        throw new Error('Invalid data format from Finnhub');\r\n        \r\n      } catch (finnhubError) {\r\n        console.log('Finnhub failed:', finnhubError.message);\r\n        // Proceed to Yahoo fallback\r\n      }\r\n      \r\n      // Fallback to Yahoo Finance with CORS proxy\r\n      try {\r\n        // Use a CORS proxy for Yahoo Finance\r\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n        const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${stockSymbol}?range=1d&interval=5m`;\r\n        \r\n        const response = await axios.get(proxyUrl + yahooUrl, {\r\n          timeout: 5000,\r\n          headers: {\r\n            'X-Requested-With': 'XMLHttpRequest'\r\n          }\r\n        });\r\n        \r\n        console.log('Yahoo response:', response.data);\r\n        \r\n        if (!response.data.chart?.result?.[0]) {\r\n          throw new Error('No chart data available from Yahoo');\r\n        }\r\n        \r\n        const result = response.data.chart.result[0];\r\n        const timestamps = result.timestamp;\r\n        const quotes = result.indicators.quote[0].close;\r\n        \r\n        const chartLabels = timestamps.map(timestamp => \r\n          new Date(timestamp * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n        );\r\n        \r\n        setChartData({\r\n          labels: chartLabels,\r\n          datasets: [\r\n            {\r\n              label: `${stockSymbol} Price`,\r\n              data: quotes,\r\n              borderColor: '#3a80e9',\r\n              backgroundColor: 'rgba(58, 128, 233, 0.3)',\r\n              borderWidth: 2,\r\n              tension: 0.1,\r\n              fill: true,\r\n              pointRadius: 0\r\n            }\r\n          ]\r\n        });\r\n        \r\n        generateChartSummary(stockSymbol, quotes);\r\n        \r\n      } catch (yahooError) {\r\n        console.error('Yahoo Finance failed:', yahooError.message);\r\n        setChartError(`Failed to load chart data: ${yahooError.message}`);\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error('Error in fetchChartData:', err);\r\n      setChartError(`Error loading chart: ${err.message}`);\r\n    } finally {\r\n      setChartLoading(false);\r\n    }\r\n  };\r\n\r\n  // Generate AI summary of the chart\r\n  const generateChartSummary = async (stockSymbol, priceData) => {\r\n    try {\r\n      if (!priceData || priceData.length === 0) return;\r\n      \r\n      const openPrice = priceData[0];\r\n      const currentPrice = priceData[priceData.length - 1];\r\n      const highPrice = Math.max(...priceData);\r\n      const lowPrice = Math.min(...priceData);\r\n      const change = currentPrice - openPrice;\r\n      const percentChange = (change / openPrice) * 100;\r\n      \r\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\r\n        model: \"openai/gpt-3.5-turbo\",\r\n        messages: [\r\n          { \r\n            \"role\": \"system\", \r\n            \"content\": \"You are a financial analyst providing concise technical analysis of stock charts.\" \r\n          },\r\n          { \r\n            \"role\": \"user\", \r\n            \"content\": `Provide a brief (2-3 sentence) technical summary of ${stockSymbol}'s trading today. \r\n                        Open: $${openPrice.toFixed(2)}, Current: $${currentPrice.toFixed(2)}, \r\n                        High: $${highPrice.toFixed(2)}, Low: $${lowPrice.toFixed(2)}, \r\n                        Change: ${change >= 0 ? '+' : ''}${change.toFixed(2)} (${percentChange >= 0 ? '+' : ''}${percentChange.toFixed(2)}%). \r\n                        Focus on key price action and trends.`\r\n          }\r\n        ],\r\n        max_tokens: 200\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      setChartSummary(response.data.choices[0].message.content);\r\n    } catch (err) {\r\n      console.error(\"Error generating chart summary:\", err);\r\n    }\r\n  };\r\n\r\n  // Fetch market news\r\n  const fetchStockNews = async (stockSymbol) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://finnhub.io/api/v1/company-news?symbol=${stockSymbol}&from=${new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}&to=${new Date().toISOString().split('T')[0]}&token=${FINNHUB_API_KEY}`\r\n      );\r\n      \r\n      // Filter for relevant news\r\n      const filteredNews = response.data\r\n        .filter(item => item.headline && item.headline.toLowerCase().includes(stockSymbol.toLowerCase()))\r\n        .slice(0, 5); // Limit to 5 most recent\r\n      \r\n      setNews(filteredNews);\r\n      generateNewsSummary(stockSymbol, filteredNews);\r\n    } catch (err) {\r\n      console.error(\"Error fetching news:\", err);\r\n    }\r\n  };\r\n\r\n  // Generate AI summary of the news\r\n  const generateNewsSummary = async (stockSymbol, newsItems) => {\r\n    try {\r\n      if (!newsItems || newsItems.length === 0) return;\r\n      \r\n      const headlines = newsItems.map(item => item.headline).join('\\n- ');\r\n      \r\n      const response = await axios.post('https://openrouter.ai/api/v1/chat/completions', {\r\n        model: \"openai/gpt-3.5-turbo\",\r\n        messages: [\r\n          { \r\n            \"role\": \"system\", \r\n            \"content\": \"You are a financial news analyst that summarizes recent market news about stocks.\" \r\n          },\r\n          { \r\n            \"role\": \"user\", \r\n            \"content\": `Provide a concise 3-4 sentence summary of the key recent news about ${stockSymbol} based on these headlines:\r\n                        - ${headlines}\r\n                        \r\n                        Focus on the most impactful developments and overall sentiment.`\r\n          }\r\n        ],\r\n        max_tokens: 300\r\n      }, {\r\n        headers: {\r\n          'Authorization': `Bearer ${OPENROUTER_API_KEY}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      setNewsSummary(response.data.choices[0].message.content);\r\n    } catch (err) {\r\n      console.error(\"Error generating news summary:\", err);\r\n    }\r\n  };\r\n\r\n  // Load all data when symbol changes\r\n  useEffect(() => {\r\n    if (symbol) {\r\n      setLoading(true);\r\n      fetchStockSummary(symbol);\r\n      fetchChartData(symbol);\r\n      fetchStockNews(symbol);\r\n    }\r\n  }, [symbol]);\r\n\r\n  const handleQuerySubmit = (e) => {\r\n    e.preventDefault();\r\n    if (query.trim() && symbol) {\r\n      fetchStockSummary(symbol, query);\r\n      setQuery('');\r\n    }\r\n  };\r\n\r\n  const handleStockSearch = (e) => {\r\n    e.preventDefault();\r\n    if (stockSearch.trim()) {\r\n      navigate(`/ai-summary/${stockSearch.trim().toUpperCase()}`);\r\n    }\r\n  };\r\n\r\n  // Chart options\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltip: {\r\n        mode: 'index',\r\n        intersect: false,\r\n        callbacks: {\r\n          label: function(context) {\r\n            return `${context.dataset.label}: $${context.parsed.y.toFixed(2)}`;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        beginAtZero: false,\r\n        ticks: {\r\n          callback: function(value) {\r\n            return '$' + value.toFixed(2);\r\n          }\r\n        },\r\n        grid: {\r\n          color: 'rgba(0, 0, 0, 0.1)'\r\n        }\r\n      },\r\n      x: {\r\n        grid: {\r\n          display: false\r\n        }\r\n      }\r\n    },\r\n    interaction: {\r\n      intersect: false,\r\n      mode: 'index'\r\n    }\r\n  };\r\n\r\n  // If no symbol is selected\r\n  if (!symbol) {\r\n    return (\r\n      <div className=\"ai-summary-container\">\r\n        <div className=\"ai-summary-header\">\r\n          <h2>Stock Analysis Tool</h2>\r\n        </div>\r\n\r\n        <div className=\"primary-search-section\">\r\n          <form onSubmit={handleStockSearch} className=\"primary-search-form\">\r\n            <input\r\n              type=\"text\"\r\n              value={stockSearch}\r\n              onChange={(e) => setStockSearch(e.target.value)}\r\n              placeholder=\"Enter a stock symbol (e.g., AAPL, MSFT)\"\r\n              className=\"primary-search-input\"\r\n              autoFocus\r\n            />\r\n            <button type=\"submit\" className=\"primary-search-button\">\r\n              Analyze Stock\r\n            </button>\r\n          </form>\r\n          <p className=\"search-examples\">\r\n            Try: AAPL, MSFT, TSLA, GOOGL, AMZN\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"welcome-message\">\r\n          <h3>Welcome to Stock Analysis AI</h3>\r\n          <p>\r\n            Get comprehensive AI-powered analysis of any publicly traded company.\r\n            Enter a stock symbol above to begin.\r\n          </p>\r\n          <div className=\"features\">\r\n            <h4>Features:</h4>\r\n            <ul>\r\n              <li>Detailed company overview and financial metrics</li>\r\n              <li>Recent performance analysis</li>\r\n              <li>1-day price chart with technical summary</li>\r\n              <li>Latest market news with sentiment analysis</li>\r\n              <li>Ability to ask specific questions about any stock</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"ai-summary-container\">\r\n      <div className=\"ai-summary-header\">\r\n        <h2>{symbol.toUpperCase()} Stock Analysis</h2>\r\n        <button onClick={() => navigate('/ai-summary')} className=\"back-button\">\r\n          Analyze Another Stock\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"search-section\">\r\n        <form onSubmit={handleQuerySubmit} className=\"query-form\">\r\n          <input\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder={`Ask anything about ${symbol.toUpperCase()}...`}\r\n            className=\"query-input\"\r\n          />\r\n          <button type=\"submit\" className=\"query-button\">\r\n            Ask\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <div className=\"tabs\">\r\n        <button \r\n          className={`tab-button ${activeTab === 'analysis' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('analysis')}\r\n        >\r\n          AI Analysis\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'chart' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('chart')}\r\n        >\r\n          Price Chart\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'news' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('news')}\r\n        >\r\n          Market News\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"ai-summary-content\">\r\n        {loading ? (\r\n          <div className=\"loading-spinner\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Generating AI-powered analysis...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"error-message\">\r\n            <p>{error}</p>\r\n            <button onClick={() => window.location.reload()} className=\"retry-button\">\r\n              Retry\r\n            </button>\r\n          </div>\r\n        ) : isCustomQuery ? (\r\n          <div className=\"query-result\">\r\n            <h3>Response to your query:</h3>\r\n            <div className=\"result-text\">\r\n              {customQueryResult.split('\\n').map((paragraph, i) => (\r\n                <p key={i}>{paragraph}</p>\r\n              ))}\r\n            </div>\r\n            <button \r\n              onClick={() => setIsCustomQuery(false)} \r\n              className=\"show-original-button\"\r\n            >\r\n              Show Full Analysis\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {activeTab === 'analysis' && (\r\n              <div className=\"summary-section\">\r\n                <h3>Comprehensive Analysis of {symbol.toUpperCase()}</h3>\r\n                <div className=\"summary-text\">\r\n                  {summary.split('\\n').map((paragraph, i) => (\r\n                    <p key={i}>{paragraph}</p>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'chart' && (\r\n              <div className=\"chart-section\">\r\n                <h3>{symbol.toUpperCase()} Today's Price Action</h3>\r\n                \r\n                {chartLoading ? (\r\n                  <div className=\"loading-spinner\">\r\n                    <div className=\"spinner\"></div>\r\n                    <p>Loading chart data...</p>\r\n                  </div>\r\n                ) : chartError ? (\r\n                  <div className=\"error-message\">\r\n                    <p>Could not load chart: {chartError}</p>\r\n                    <button \r\n                      onClick={() => fetchChartData(symbol)} \r\n                      className=\"retry-button\"\r\n                    >\r\n                      Retry\r\n                    </button>\r\n                  </div>\r\n                ) : chartData ? (\r\n                  <>\r\n                    <div className=\"chart-container\">\r\n                      <Line data={chartData} options={chartOptions} />\r\n                    </div>\r\n                    {chartSummary && (\r\n                      <div className=\"chart-summary\">\r\n                        <h4>Technical Summary:</h4>\r\n                        <p>{chartSummary}</p>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <div className=\"no-data-message\">\r\n                    <p>No chart data available for {symbol.toUpperCase()}</p>\r\n                    <button \r\n                      onClick={() => fetchChartData(symbol)} \r\n                      className=\"retry-button\"\r\n                    >\r\n                      Try Again\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'news' && (\r\n              <div className=\"news-section\">\r\n                <h3>Latest News About {symbol.toUpperCase()}</h3>\r\n                {newsSummary && (\r\n                  <div className=\"news-summary\">\r\n                    <h4>News Summary:</h4>\r\n                    <p>{newsSummary}</p>\r\n                  </div>\r\n                )}\r\n                <div className=\"news-list\">\r\n                  {news.length > 0 ? (\r\n                    news.map((item, index) => (\r\n                      <div key={index} className=\"news-item\">\r\n                        <h4>\r\n                          <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            {item.headline}\r\n                          </a>\r\n                        </h4>\r\n                        <p className=\"news-source\">{item.source} - {new Date(item.datetime * 1000).toLocaleDateString()}</p>\r\n                        <p className=\"news-summary\">{item.summary || 'No summary available'}</p>\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <p>No recent news found for {symbol.toUpperCase()}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AISummary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}